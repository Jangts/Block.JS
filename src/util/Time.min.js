;tangram.block([],function(pandora,global,imports,undefined){var _=pandora;var doc=global.document;var console=global.console;var doubleDigit=function(n){@boundary_384_as_preoperator::n@boundary_385_as_operator::10?"0"@boundary_386_as_operator::n:n};var patterns=[[/^\d+$/,function(time){@boundary_166_as_preoperator::parseInt(time)}],[/^[A-z]+\s+\d{1,2},\d{3,4}(\s+\d{1,2}:\d{1,2}:\d{1,2}){0,1}$/,function(time){@boundary_171_as_preoperator::Date.parse(time.replace(/\s+/g,' '))}],[/^\d{1,2}\/\d{1,2}\/\d{3,4}(\s+\d{1,2}:\d{1,2}:\d{1,2}){0,1}$/,function(time){@boundary_180_as_preoperator::Date.parse(time.replace(/\s+/g,' '))}],[/^\d{1,2}-\d{1,2}-\d{3,4}(\s+\d{1,2}:\d{1,2}:\d{1,2}){0,1}$/,function(time){@boundary_189_as_preoperator::Date.parse(time.replace(/-/g,"/").replace(/\s+/g,' '))}],[/^\d{3,4}\/\d{1,2}\/\d{1,2}(\s+\d{1,2}:\d{1,2}:\d{1,2}){0,1}$/,function(time){var tempStrs=time.split(/\s+/) var dateStrs=tempStrs[0].split('/') var year=parseInt(dateStrs[0],10) var month=parseInt(dateStrs[1],10)@boundary_342_as_operator::1;var day=parseInt(dateStrs[2],10) var timeStrs=tempStrs[1]?tempStrs[1].split(':'):[0,0,0]var hour=parseInt(timeStrs[0],10) var minute=parseInt(timeStrs[1],10)@boundary_343_as_operator::1;var second=parseInt(timeStrs[2],10) @boundary_332_as_preoperator::[year,month,day,hour,minute,second]}],[/^\d{3,4}-\d{1,2}-\d{1,2}(\s+\d{1,2}:\d{1,2}:\d{1,2}){0,1}$/,function(time){var tempStrs=time.split(/\s+/) var dateStrs=tempStrs[0].split('-') var year=parseInt(dateStrs[0],10) var month=parseInt(dateStrs[1],10)@boundary_368_as_operator::1;var day=parseInt(dateStrs[2],10) var timeStrs=tempStrs[1]?tempStrs[1].split(':'):[0,0,0]var hour=parseInt(timeStrs[0],10) var minute=parseInt(timeStrs[1],10) var second=parseInt(timeStrs[2],10) @boundary_358_as_preoperator::[year,month,day,hour,minute,second]}]];var months=[];var mons=[];var match={year:function(Y){if((@boundary_876_as_preoperator::Y@boundary_877_as_operator::'number')@boundary_888_as_operator::((@boundary_879_as_preoperator::m@boundary_880_as_operator::'string')@boundary_886_as_operator::(/^\d{3,4}$/.test(Y)))){@boundary_754_as_preoperator::parseInt(Y)}@boundary_875_as_preoperator::1},month:function(m){if((@boundary_893_as_preoperator::m@boundary_894_as_operator::'number')@boundary_927_as_operator::((@boundary_896_as_preoperator::m@boundary_897_as_operator::'string')@boundary_919_as_operator::(/^\d{1,2}$/.test(m)))){@boundary_758_as_preoperator::parseInt(m)};if((@boundary_900_as_preoperator::m@boundary_901_as_operator::'string')@boundary_921_as_operator::(months.indexOf(m)@boundary_911_as_operator::0)){@boundary_762_as_preoperator::months.indexOf(m)};if((@boundary_904_as_preoperator::m@boundary_905_as_operator::'string')@boundary_923_as_operator::(mons.indexOf(m)@boundary_915_as_operator::0)){@boundary_767_as_preoperator::mons.indexOf(m)}@boundary_892_as_preoperator::1},day:function(d){if((@boundary_932_as_preoperator::d@boundary_933_as_operator::'number')@boundary_944_as_operator::((@boundary_935_as_preoperator::d@boundary_936_as_operator::'string')@boundary_942_as_operator::(/^\d{1,2}$/.test(d)))){@boundary_772_as_preoperator::parseInt(d)}@boundary_931_as_preoperator::1},time:function(t){if((@boundary_949_as_preoperator::t@boundary_950_as_operator::'number')@boundary_961_as_operator::((@boundary_952_as_preoperator::t@boundary_953_as_operator::'string')@boundary_959_as_operator::(/^\d{1,2}$/.test(t)))){@boundary_776_as_preoperator::parseInt(t)}@boundary_948_as_preoperator::0}};var getArray=function(year,month,day,hour,minute,second){@boundary_388_as_preoperator::[match.year(year),match.month(month)@boundary_230_as_operator::1,match.day(day),match.time(hour),match.time(minute),match.time(second)]};var codes={'week ago':function(){@boundary_390_as_preoperator::Date.parse(new Date())@boundary_394_as_operator::60@boundary_395_as_operator::60@boundary_396_as_operator::24@boundary_397_as_operator::7@boundary_398_as_operator::1000},'yesterday':function(){@boundary_402_as_preoperator::Date.parse(new Date())@boundary_406_as_operator::60@boundary_407_as_operator::60@boundary_408_as_operator::24@boundary_409_as_operator::1000},'now':function(){@boundary_413_as_preoperator::Date.parse(new Date())},'tomorrow':function(){@boundary_420_as_preoperator::Date.parse(new Date())@boundary_424_as_operator::60@boundary_425_as_operator::60@boundary_426_as_operator::24@boundary_427_as_operator::1000},'week future':function(){@boundary_431_as_preoperator::Date.parse(new Date())@boundary_435_as_operator::60@boundary_436_as_operator::60@boundary_437_as_operator::24@boundary_438_as_operator::7@boundary_439_as_operator::1000}};var units={d:1000@boundary_781_as_operator::60@boundary_782_as_operator::60@boundary_783_as_operator::24,H:1000@boundary_784_as_operator::60@boundary_785_as_operator::60,i:1000@boundary_786_as_operator::60,s:1000,ms:1};var dates=[];pandora.declareClass('util.Time',{_init:function(time){var t=void 0;var date=void 0;switch(arguments.length){case 1:switch(@boundary_1053_as_preoperator::time){case 'object':if(time@boundary_445_as_operator::Array){t=getArray(time[0],time[1],time[2],time[3],time[4],time[5])}@boundary_1028_as_preoperator::if((@boundary_1030_as_preoperator::time.year@boundary_1031_as_operator::'number')@boundary_1040_as_operator::/^\d{3,4}$/.test(time.year)){t=getArray(time.year,time.month,time.day,time.hour,time.minute,time.second)}@boundary_1029_as_preoperator::if((@boundary_1034_as_preoperator::time.Y@boundary_1035_as_operator::'number')@boundary_1044_as_operator::/^\d{3,4}$/.test(time.Y)){t=getArray(time.Y,time.m,time.d,time.H,time.i,time.s)};break;case 'string':if(codes[time]){t=codes[time]()};_.loop(patterns,function(i,type){if(type[0].test(time)){t=type[1](time) _.loop.out()}}) t=time;break;case 'number':t=parseInt(time) break};break;case 2:t=getArray(arguments[0],arguments[1]) break;case 3:t=getArray(arguments[0],arguments[1],arguments[2]) break;case 4:t=getArray(arguments[0],arguments[1],arguments[2],arguments[3]) break;case 5:t=getArray(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]) break;case 6:t=getArray(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]) break};switch(@boundary_458_as_preoperator::t){case 'number':date=new Date(t) break;case 'object':date=new Date(t[0],t[1],t[2],t[3],t[4],t[5]) break;case 'string':date=new Date(t) break;case 'undefined':date=new Date() break};this.id=dates.push(date)@boundary_1073_as_operator::1},update:function(){dates[this.id]=new Date() @boundary_460_as_preoperator::this},date:function(){@boundary_464_as_preoperator::dates[this.id]},parse:function(){@boundary_466_as_preoperator::dates[this.id].getTime()},year:function(val){if(@boundary_475_as_preoperator::val@boundary_476_as_operator::'number'){dates[this.id].setFullYear(val) @boundary_471_as_preoperator::this}@boundary_695_as_preoperator::dates[this.id].getFullYear()},month:function(val){if(@boundary_482_as_preoperator::val@boundary_483_as_operator::'number'){dates[this.id].setMonth(val) @boundary_478_as_preoperator::this}@boundary_700_as_preoperator::dates[this.id].getMonth()@boundary_702_as_operator::1},dayofweek:function(val){if(@boundary_489_as_preoperator::val@boundary_490_as_operator::'number'){dates[this.id].setDay(val) @boundary_485_as_preoperator::this}@boundary_706_as_preoperator::dates[this.id].getDay()},day:function(val){if(@boundary_496_as_preoperator::val@boundary_497_as_operator::'number'){dates[this.id].setDate(val) @boundary_492_as_preoperator::this}@boundary_711_as_preoperator::dates[this.id].getDate()},hour:function(val){if(@boundary_503_as_preoperator::val@boundary_504_as_operator::'number'){dates[this.id].setHours(val) @boundary_499_as_preoperator::this}@boundary_716_as_preoperator::dates[this.id].getHours()},minute:function(val){if(@boundary_510_as_preoperator::val@boundary_511_as_operator::'number'){dates[this.id].setFullMinutes(val) @boundary_506_as_preoperator::this}@boundary_721_as_preoperator::dates[this.id].getMinutes()},second:function(val){if(@boundary_517_as_preoperator::val@boundary_518_as_operator::'number'){dates[this.id].setSeconds(val) @boundary_513_as_preoperator::this}@boundary_726_as_preoperator::dates[this.id].getSeconds()},ms:function(val){if(@boundary_524_as_preoperator::val@boundary_525_as_operator::'number'){dates[this.id].setMilliseconds(val) @boundary_520_as_preoperator::this}@boundary_731_as_preoperator::dates[this.id].getMilliseconds()},when:function(hour){hour=@boundary_737_as_preoperator::hour@boundary_738_as_operator::'number'?hour:this.hour() switch(hour){case 1:case 2:case 3:case 4:@boundary_527_as_preoperator::'WEE' case 5:case 6:@boundary_528_as_preoperator::'DWN' case 7:case 8:case 9:case 10:case 11:@boundary_529_as_preoperator::'MRN' case 12:case 13:@boundary_530_as_preoperator::'NOON' case 14:case 15:case 16:case 17:@boundary_531_as_preoperator::'AFTN' case 18:case 19:case 20:case 21:@boundary_532_as_preoperator::'EVN' case 22:case 23:case 0:@boundary_533_as_preoperator::'NIT'}},utc:function(sets){if(sets){(@boundary_536_as_preoperator::sets.day@boundary_537_as_operator::'number')@boundary_569_as_operator::dates[this.id].setUTCDate(sets.day)(@boundary_540_as_preoperator::sets.week@boundary_541_as_operator::'number')@boundary_570_as_operator::dates[this.id].setUTCDay(sets.week)(@boundary_544_as_preoperator::sets.month@boundary_545_as_operator::'number')@boundary_571_as_operator::dates[this.id].setUTCMonth(sets.month@boundary_547_as_operator::1)(@boundary_549_as_preoperator::sets.year@boundary_550_as_operator::'number')@boundary_572_as_operator::dates[this.id].setUTCFullYear(sets.year)(@boundary_553_as_preoperator::sets.hour@boundary_554_as_operator::'number')@boundary_573_as_operator::dates[this.id].setUTCHours(sets.hour)(@boundary_557_as_preoperator::sets.minute@boundary_558_as_operator::'number')@boundary_574_as_operator::dates[this.id].setUTCMinutes(sets.minute)(@boundary_561_as_preoperator::sets.second@boundary_562_as_operator::'number')@boundary_575_as_operator::dates[this.id].setUTCSeconds(sets.second)(@boundary_565_as_preoperator::sets.ms@boundary_566_as_operator::'number')@boundary_576_as_operator::dates[this.id].setUTCMilliseconds(sets.ms) @boundary_535_as_preoperator::this}},toString:function(type){switch(type){case 'source':@boundary_594_as_preoperator::dates[this.id].toSource() case 'time':@boundary_595_as_preoperator::dates[this.id].toTimeString() case 'date':@boundary_596_as_preoperator::dates[this.id].toDateString() case 'GMT':case 'UTC':@boundary_597_as_preoperator::dates[this.id].toUTCString() case 'local':@boundary_598_as_preoperator::dates[this.id].toLocaleString() case 'localtime':@boundary_599_as_preoperator::dates[this.id].toLocaleTimeString() case 'localdate':@boundary_600_as_preoperator::dates[this.id].toLocaleDateString()}@boundary_742_as_preoperator::dates[this.id].toString()},val:function(){@boundary_623_as_preoperator::dates[this.id].valueOf()},prev:function(t,unit){t=@boundary_634_as_preoperator::t@boundary_635_as_operator::'number'?t:1;ms=units[unit]?units[unit]@boundary_636_as_operator::t:1000@boundary_637_as_operator::t;@boundary_628_as_preoperator::this.ms(this.ms()@boundary_630_as_operator::ms)},next:function(t,unit){t=@boundary_647_as_preoperator::t@boundary_648_as_operator::'number'?t:1;ms=units[unit]?units[unit]@boundary_649_as_operator::t:1000@boundary_650_as_operator::t;@boundary_641_as_preoperator::this.ms(this.ms()@boundary_643_as_operator::ms)},now:function(){this.update() @boundary_846_as_preoperator::{year:this.year(),month:this.month(),day:this.day(),hour:this.hour(),minute:this.minute(),second:this.second()}},format:function(format,times){format=format@boundary_983_as_operator::'yyyy/MM/dd  hh:mm:ss' times=times ||{};var yyyy=times.year@boundary_984_as_operator::this.year() var M=times.month@boundary_985_as_operator::this.month() var d=times.day@boundary_986_as_operator::this.day() var H=times.hour@boundary_987_as_operator::this.hour() var h=H@boundary_990_as_operator::12;var m=times.minute@boundary_988_as_operator::this.minute() var s=times.second@boundary_989_as_operator::this.second() var matchs={yyyy:yyyy,yy:yyyy@boundary_853_as_operator::100,MM:doubleDigit(M),M:M,dd:doubleDigit(d),d:d,HH:doubleDigit(H),H:H,hh:doubleDigit(h),h:h,mm:doubleDigit(m),m:m,ss:doubleDigit(s),s:s };for(var i@boundary_657_as_operator::matchs){format=format.replace(i,matchs[i])}@boundary_976_as_preoperator::format},loop:function(callback,duration,update){var that=this;_.Time.loop(function(){update@boundary_661_as_operator::that.update() callback.call(that)},duration)},process:function(callback,time,unit){if(@boundary_1016_as_preoperator::time@boundary_1017_as_operator::'string'){var regp=/^(\d{3,4}\/\d{2}\/\d{2})(\s+(\d{2}:\d{2})(:\d{2}){0,1}){0,1}$/ var time=str.replace('-','/').replace(/\*/,' ').replace(/\/(\d)/,'/0$1') var duration=0;if(time.match(regp)){duration=new new Date().getTime(time)@boundary_864_as_operator::this.time()}}@boundary_1055_as_preoperator::if(@boundary_669_as_preoperator::time@boundary_670_as_operator::'number'){duration=units[unit]?units[unit]@boundary_667_as_operator::time:1000@boundary_668_as_operator::time};duration=(duration@boundary_1056_as_operator::0)?duration:0;setTimeout(callback,duration)}});pandora.extend(pandora.util.Time,{stamp:function(){var timestamp=Date.parse(new Date()) @boundary_672_as_preoperator::timestamp@boundary_2_as_operator::1000},loop:function(callback,duration,times){callback=@boundary_1021_as_preoperator::callback@boundary_1024_as_operator::'function'?callback:function(){};duration=@boundary_1022_as_preoperator::duration@boundary_1025_as_operator::'number'?duration:1000;times=@boundary_1023_as_preoperator::times@boundary_1026_as_operator::'number'?times:0;var that=this;if(times@boundary_682_as_operator::0){setInterval(callback,duration)}@boundary_1019_as_preoperator::if(times@boundary_686_as_operator::1){setTimeout(callback,duration)}@boundary_1020_as_preoperator::{var timer=function(){setTimeout(function(){callback();@boundary_691_as_preoperator::times@boundary_690_as_operator::timer()},duration)};times@boundary_871_as_operator::0@boundary_872_as_operator::timer()}}});@boundary_1079_as_preoperator::_.util.Time});