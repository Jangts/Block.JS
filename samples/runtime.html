<!DOCTYPE html>
<html lang="en-us">

<head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RUNTIME</title>
    <script src="../src/tangram.js" data-tangram-debug>
    </script>
</head>

<body>
    <script>
        tangram.block([
            '$_/arr/',
            '$_/util/bool',
            '$_/util/type as type1',
            '$_/util/../util/type as type2',
            '$_/util/../util/type as type3'
        ], function(pandora, global, imports, undefined) {
           
            var _ = pandora,
                declare = pandora.declareClass,
                
                document = global.document,
                console = global.console;

            console.log(imports);
            console.log(type1);
            console.log(type2);
            console.log(type3);

            var div = _.render({
                    margin: "100px auto 0",
                    textAlign: "center",
                    fontSize: "72px"
                }),
                uid = new _.Identifier(), // 生成标识符
                strings = 'Hello World!'.split(''), // 字符数组化
                iterator = new _.Iterator(strings), // 生成迭代器
                render = function(letter) {
                    if (letter) {
                        setTimeout(function() {
                            div.innerHTML += letter;
                            render(iterator.next());
                        }, 150);
                    } else {
                        setTimeout(function() {
                            _.render({
                                margin: "10px auto",
                                textAlign: "center",
                                fontSize: "13px",
                                color: "#666"
                            }, 'TestUID : ' + uid.toString());
                        }, 200);
                    }
                };
            //console.log(uid, iterator);
            setTimeout(function() {
                render(iterator.next());
            }, 200);

            return {div};
        }, true);

        setTimeout(function () {
            console.log(div);
        }, 1000)
    </script>
</body>

</html>